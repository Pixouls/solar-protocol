version: '3.7'

name: solar-protocol

services:
  datalogger:
    restart: on-failure
    command: python csv_datalogger.py DEV
  api:
    restart: on-failure
    volumes:
      - ./api:/api/venv
    command: python -m uvicorn api:app --proxy-headers --host 0.0.0.0 --port 80 --reload
  protocol:
    restart: on-failure
    command: python run.py now
    volumes:
      - ./protocol:/protocol/venv
